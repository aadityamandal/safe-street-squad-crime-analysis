<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Toronto Crime Visualization</title>
    <link rel="stylesheet" href="css/styles.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/15.4.0/nouislider.css"
        integrity="sha512-DGB74Gyw93qON+V0QxSRs1er6sqoPyFoy23HBL5LN7MRJBcjeCU22zega+vOEGE0XQLoVrv4ExcaesSTwZQA2w=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css">





</head>

<body class="text-center">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
    <script>
        AOS.init();
    </script>
    <div data-aos="fade-up" data-aos-duration="1000">
        <h1 class="my-4">How Safe is Toronto? Understanding Crime Trends &amp Walking Safety</h1>
        <p>A high-level introduction explaining why analyzing crime patterns is important for making informed decisions
            about safety, especially when walking alone at night.</p>
    </div>


    <div class="container">
        <!-- Hook -->
        <div class="row my-5">
            <!-- <h2>Hook</h2> -->
            <p class="d-inline-block p-3 border rounded shadow-sm" style="background-color: #fffcbc;"
                data-aos="flip-left" data-aos-duration="1000">Can we walk around
                without fear alone at night?</p>
            <div class="col">
                <div class="line-chart-container" id="hook-chart"></div>
            </div>
            <div class="container py-3 d-flex justify-content-center align-items-center">
                <div class="w-100">
                    <!-- Date Range Section -->
                    <div class="row mb-3 d-flex align-items-center justify-content-center gap-3">
                        <div class="col-auto">
                            <label><strong>Select Date Range:</strong></label><br>
                        </div>
                        <div class="col-auto">
                            <div id="slider-hook" style="width: 200px;"></div>
                        </div>
                    </div>

                    <!-- Category Filter Section -->
                    <div class="row mb-3 d-flex align-items-center justify-content-center gap-3">
                        <div id="category-filter-hook" class="category-filter-container col-auto">
                            <label><strong>Show Categories:</strong></label>

                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" id="line-assault" value="ASSAULT"
                                    checked>
                                <label class="form-check-label" for="line-assault">Assault</label>
                            </div>

                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" id="line-robbery" value="ROBBERY"
                                    checked>
                                <label class="form-check-label" for="line-robbery">Robbery</label>
                            </div>

                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" id="line-theftover" value="THEFTOVER"
                                    checked>
                                <label class="form-check-label" for="line-theftover">Theft Over</label>
                            </div>

                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" id="line-autotheft" value="AUTOTHEFT"
                                    checked>
                                <label class="form-check-label" for="line-autotheft">Auto Theft</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" id="line-breakenter" value="BREAKENTER"
                                    checked>
                                <label class="form-check-label" for="line-breakenter">Break &amp Enter</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Rising Insight #1 -->
        <div class="row my-5">
            <!-- <h2>Rising Insight #1</h2> -->
            <p class="d-inline-block p-3 border rounded shadow-sm" style="background-color: #fffcbc;"
                data-aos="zoom-in-up" data-aos-duration="1000">Crime trends have
                changed significantly over the past decade, but timing matters just as much.

                Are there specific times of day when crimes spike?</p>
            <div class="col">
                <div class="line-chart-container" id="rising-insight-1-chart"></div>
            </div>
            <div class="container py-3 d-flex justify-content-center align-items-center">
                <div class="w-100">
                    <!-- Date Range Section -->
                    <div class="row mb-3 d-flex align-items-center justify-content-center gap-3">
                        <div class="col-auto">
                            <label><strong>Select Date Range:</strong></label><br>
                        </div>
                        <div class="col-auto">
                            <div id="slider" style="width: 200px;"></div>
                        </div>
                    </div>

                    <!-- Category Filter Section -->
                    <div class="row mb-3 d-flex align-items-center justify-content-center gap-3">
                        <div id="category-filter-timeOfDay" class="category-filter-container col-auto">
                            <label><strong>Show Categories:</strong></label>

                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" id="line-morning" value="Morning"
                                    checked>
                                <label class="form-check-label" for="line-morning">Morning</label>
                            </div>

                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" id="line-afternoon" value="Afternoon"
                                    checked>
                                <label class="form-check-label" for="line-afternoon">Afternoon</label>
                            </div>

                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" id="line-evening" value="Evening"
                                    checked>
                                <label class="form-check-label" for="line-evening">Evening</label>
                            </div>

                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" id="line-night" value="Night" checked>
                                <label class="form-check-label" for="line-night">Night</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>




            <p class="mt-3 padding-top p-3 border rounded shadow-sm" style="background-color: #fffcbc;"
                data-aos="zoom-out">
                If so, should we
                reconsider when it's safest to be out alone?</p>

        </div>

        <!-- Rising Insight #2 Sketch -->
        <div class="row my-5">
            <div class="col">
                <!-- <h2>Rising Insight #2</h2> -->
                <p class="d-inline-block p-3 border rounded shadow-sm" style="background-color: #fffcbc;"
                    data-aos="fade-right" data-aos-duration="1000">
                    Of course, crime isn't just about <i>when</i> it happens— it also depends on <i>where</i>.<br>
                    Let's explore how crime patterns shift between different city zones.
                </p>
                <p>This section presents the planned visualization for analyzing crime patterns in urban and suburban
                    areas.</p>

                <!-- Insert Sketch Image -->
                <!-- <img src="data/placeholder_sketches/rising_insight1_sketch.png"
                    alt="Rising Insight #2 Visualization Sketch" class="img-fluid"
                    style="max-width: 80%; height: auto; border: 1px solid #ddd; padding: 10px; margin-top: 10px;"> -->

                <div class="row">
                    <select class="form-select" id="rs2-form" aria-label="Default select example">
                        <option value="All MCI Categories" selected>All MCI Categories</option>
                        <option value="Assault">Assault</option>
                        <option value="Robbery">Robbery</option>
                        <option value="Break and Enter">Break and Enter</option>
                        <option value="Theft Over">Theft Over</option>
                        <option value="Auto Theft">Auto Theft</option>
                    </select>
                </div>
                <div class="row">
                    <div class="rising-insight-2" id="rising-insight-2"></div>
                </div>

                <!-- Description of Planned Interactions -->
                <p class="mt-3">
                    This visualization will explore crime trends across different regions, focusing on comparisons
                    between urban and suburban crime distribution. Users will be able to explore the map
                    to see which areas have the highest occurrences of different crimes.
                </p>
            </div>
        </div>




        <!-- Message -->
        <div class="row my-5">
            <div class="col">
                <!-- <h2>Message</h2> -->
                <p class="d-inline-block p-3 border rounded shadow-sm" style="background-color: #fffcbc;"
                    data-aos="zoom-out" data-aos-duration="1000">
                    Where you live also plays a huge role in crime exposure — let's break down how urban and suburban
                    areas differ in terms of crime type and frequency.
                </p>

                <!-- Moving the Pie Charts Here -->
                <p>This visualization compares the crime distribution between urban and suburban areas in Toronto.</p>
                <div class="row">
                    <div class="col-md-6">
                        <h3>Urban Crime Distribution</h3>
                        <div id="urban-pie-chart"></div>
                    </div>
                    <div class="col-md-6">
                        <h3>Suburban Crime Distribution</h3>
                        <div id="suburban-pie-chart"></div>
                    </div>
                </div>
            </div>
        </div>


        <!-- Solution Section -->
        <div class="row my-5">
            <div class="col">
                <h2>Solution: Walking Safety Checker</h2>
                <p class="text-muted">Find out how safe your walking route is based on historical crime data in Toronto.
                </p>

                <!-- Input Fields for Source and Destination -->
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <div style="position: relative; flex-grow: 1; margin-right: 10px;">
                        <input id="start-location" type="text" class="form-control form-control-lg"
                            placeholder="📍 Enter starting location">
                        <div id="start-location-suggestions" class="autocomplete-dropdown"></div>
                    </div>

                    <div style="position: relative; flex-grow: 1;">
                        <input id="end-location" type="text" class="form-control form-control-lg"
                            placeholder="🚏 Enter destination">
                        <div id="end-location-suggestions" class="autocomplete-dropdown"></div>
                    </div>
                </div>

                <!-- Safety Check Button -->
                <button class="btn btn-primary w-100 fw-bold mb-3" onclick="calculateRouteSafety()">🔎 Check How Safe I
                    Will Be</button>

                <!-- Placeholder for Output Score -->
                <h3 id="safety-score" class="text-center mt-4">Crimes Reported Near Route: -</h3>

                <!-- Insert Map Container -->
                <div id="map-container" class="mt-3">
                    <svg id="map-svg"></svg>
                </div>

                <style>
                    #map-container {
                        width: 100%;
                        height: 500px;
                        position: relative;
                        border: 1px solid #ccc;
                        /* Subtle border for clarity */
                        border-radius: 10px;
                        /* Rounded edges */
                        overflow: hidden;
                    }

                    svg {
                        width: 100%;
                        height: 100%;
                    }
                </style>
                <div class="mb-3">
                    <button class="btn btn-outline-dark w-100 text-start fw-bold" type="button"
                        data-bs-toggle="collapse" data-bs-target="#instructionsCollapse">
                        Instructions: How to Use This Tool ⬇
                    </button>
                    <div id="instructionsCollapse" class="collapse mt-2">
                        <div class="border p-3 rounded bg-light">
                            <p>This tool helps you check <b>how safe</b> your walking route is based on historical crime
                                data.</p>
                            <p><b>Steps to Use:</b></p>
                            <ul>
                                <li>Enter your <b>starting location</b> and <b>destination</b>.</li>
                                <li>Click <b>"Check How Safe I Will Be"</b> to analyze the safety of your walk.</li>
                                <li>The <b>map will update</b>, displaying safety zones and crime risk areas.</li>
                                <li>The tool will provide a <b>safety index score</b> (higher = safer).</li>
                            </ul>
                        </div>
                    </div>
                </div>


                <!-- Section 2: Safety Index Calculation (Collapsible) -->
                <div class="mt-3">
                    <button class="btn btn-outline-dark w-100 text-start fw-bold" type="button"
                        data-bs-toggle="collapse" data-bs-target="#calculationCollapse">
                        How the Safety Score is Calculated ⬇
                    </button>
                    <div id="calculationCollapse" class="collapse mt-2">
                        <div class="border p-3 rounded bg-light">
                            <p><b>The Safety Index is calculated based on:</b></p>
                            <ul>
                                <li><b>Crime Rate:</b> Number of reported crimes along your route.</li>
                                <li><b>Location Density:</b> More populated areas tend to be safer.</li>
                                <li><b>Severity of Crimes:</b> Violent crimes reduce the score more.</li>
                                <li><b>Distance Factor:</b> Longer walks **lower** the safety score.</li>
                                <li><b>Crime Recency:</b> Recent incidents impact the score more.</li>
                            </ul>
                            <p><b>Score Interpretation:</b></p>
                            <ul>
                                <li>**7 - 10** → <b>Safe to walk</b></li>
                                <li>**4 - 6.9** → <b>Walk with caution</b></li>
                                <li>**2 - 3.9** → <b>Better to use a car</b></li>
                                <li>**Below 2** → <b>Extremely unsafe</b></li>
                            </ul>
                        </div>
                    </div>
                    <!-- Example Use Case (Always Visible) -->
                    <div class="mt-4 border p-3 rounded bg-light">
                        <p><b>Scenario:</b></p>
                        <p>A user enters '<b>Union Station</b>' as their starting point and '<b>Bahen Centre for
                                Information Technology</b>' as their destination.</p>
                        <p>The system calculates a <b>Safety Score of 3.0</b>, meaning:</p>
                        <ul>
                            <li>There have been multiple <b>reported crimes along this route</b>.</li>
                            <li>It's **not the safest path**—walking with caution is advised.</li>
                            <li>Alternative **transport options** like TTC or Uber might be preferable.</li>
                        </ul>
                    </div>

                </div>

            </div>
        </div>


        <!------------------ SOLUTION END----------------->>



        <!-- Final -->
        <div class="row my-5">
            <div class="col">
                <!-- <h2>Final</h2> -->
                <p class="d-inline-block p-3 border rounded shadow-sm" style="background-color: #fffcbc;"
                    data-aos="zoom-in" data-aos-duration="1000">Based on these
                    insights, we can make more informed decisions about where and when to travel alone.
                    Whether you're commuting at night, choosing a neighborhood to live in, or just exploring the
                    city—awareness is key to safety.</p>
            </div>
        </div>

        <!-- Sources Section -->
        <div class="container my-5" data-aos="fade-right" data-aos-duration="1000">
            <h2 class="text-center mb-4">Sources</h2>
            <ul class="list-unstyled text-center">
                <li><a href="https://data.torontopolice.on.ca/datasets/TorontoPS::neighbourhood-crime-rates-open-data/about"
                        target="_blank">
                        Neighbourhood Crime Rates Open Data</a></li>
                <li><a href="https://data.torontopolice.on.ca/datasets/TorontoPS::major-crime-indicators-open-data/about"
                        target="_blank">
                        Major Crime Indicators Open Data</a></li>
                <li><a href="https://data.torontopolice.on.ca/datasets/TorontoPS::shooting-and-firearm-discharges-open-data/about"
                        target="_blank">
                        Shooting and Firearm Discharges Open Data</a></li>
            </ul>
        </div>






    </div>

    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/15.4.0/nouislider.min.js"
        integrity="sha512-mZXUH8DAODwCHioWP3gltQwa953LbABMlzTYwYkKqv8eNxOk37B1HgNNuCMfFxgrpW5C34WJbxPDcM58+s1dJA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="js/script.js"></script>
    <script src="js/lineChart.js"></script>
    <script src="js/pieChart.js"></script>
    <script src="js/rs2Map.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>



</body>

</html>